<meta charset="UTF-8">
<button id="click">click to start</button>
<button id="close">click to close</button>
<script>
    var popups = [];

    function loop() {
        popups.forEach(function (w, i) {
            var ii,
                s = '#',
                l = Math.round(Math.sin(performance.now()/100 + (i/2)) * 5) + 5;

            for (ii = 0; ii < l; ii ++) {
                s += String.fromCharCode(0x2581);
            }

            s += 'x';

            try {
                w.document.location.hash = s;
            }
            catch (exception) {
            }
        });

        setTimeout(loop, 50);
    }

    document.getElementById('click').addEventListener('click', function () {
        //w = window.open('http://matthewrayfield.com', 'x', 'top=0,left=0,width=200,height=200,menubar=no,toolbar=no,location=no,status=no,resizable=no,scrollbars=no');
        //menubar causes it to open in tab no matter size or position
        //return;

        var i, w, y, gap = 50;

        for (i = 0; i < 10; i ++) {
            y = i * gap + 25;
            w = window.open('about:blank#'+i, 'w'+i, 'width=500,height=0,left=25,top='+y);
            w.document.title = '====================';
            w.moveTo(25, y);
            w.resizeTo(500, 0);
            popups.push(w);
        }

        loop();
    });

    document.getElementById('close').addEventListener('click', function () {
        popups.forEach(function (w) {
            w.close();
        });
    });
</script>
